routes:
  - uri: /web1
    name: web1
    desc: test web1
    priority: 1
    methods:
      - GET
      - POST
      - PUT
      - DELETE
      - PATCH
      - HEAD
      - OPTIONS
     - CONNECT
     - TRACE
     - PURGE
    host: localhost
    remote_addr: 0.0.0.0/0
    upstream_id: '585418475900502727'
    labels:
      API_VERSION: v1
    plugins:
      kafka-logger:
        brokers:
          - host: kafka
            port: 9092
        kafka_topic: "apisix-logs"
        producer_type: "sync"
        include_req_body: true
        include_resp_body: true
      prometheus: {}
    status: 1
  - uri: /web2
    name: web2
    desc: test web 2
    methods:
      - GET
      - POST
      - PUT
      - DELETE
      - PATCH
      - HEAD
      - OPTIONS
      - CONNECT
      - TRACE
      - PURGE
    host: localhost
    upstream_id: '585424861711565511'
    labels:
      API_VERSION: v1
    plugins:
      kafka-logger:
        brokers:
          - host: kafka
            port: 9092
        kafka_topic: "apisix-logs"
        producer_type: "sync"
        include_req_body: true
        include_resp_body: true
      prometheus: {}
    status: 1

upstreams:
  - id: '585418475900502727'
    nodes:
      - host: web1
        port: 80
        weight: 1
    timeout:
      connect: 6
      send: 6
      read: 6
    type: roundrobin
    scheme: http
    pass_host: pass
    name: web1
    desc: web1
    keepalive_pool:
      idle_timeout: 60
      requests: 1000
      size: 320
  - id: '585424861711565511'
    nodes:
      - host: web2
        port: 80
        weight: 1
    timeout:
      connect: 6
      send: 6
      read: 6
    type: roundrobin
    scheme: http
    pass_host: pass
    name: web1
    desc: web1
    keepalive_pool:
      idle_timeout: 60
      requests: 1000
      size: 320

consumers:
  # Optional: if you want to test with key-auth later
  #- username: consumer1
  #  plugins:
  #    key-auth:
  #      key: auth-one